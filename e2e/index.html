<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <link rel = "stylesheet" type="text/css" href="css/pico.min.css">
    <title>Smart wallet test</title>
  </head>
  <body>
    <main class="container">
      <h1 id="header">zkFold Smart Wallet (Preprod)</h1>
      <form action="/init" method="POST">
        <fieldset>
          <label id="network_selector" hidden=true>
            Network type
            <select name="network" aria-label="Select network" required>
              <option>Mainnet</option>
              <option>Preview</option>
              <option selected="selected">Preprod</option>
            </select>
          </label>
          <label id="method_selector" hidden=true>
            Method 
            <select name="method" aria-label="Select creation method" id="method_options" required onChange="manageMethod()">
              <option>Mnemonic</option>
              <option selected="selected">Google Oauth</option>
            </select>
          </label>
          <input
            name="method_data" id="address_input" placeholder="Mnemonic" hidden=true autocomplete="off"
          />
        </fieldset>
        <input
          id="submit"
          type="submit"
          value="Initialise wallet with Gmail"
        />
      </form>
      <button class="outline secondary" id="show_controls" onclick="manageControls()">Show advanced controls</button>
      </main>
  </body>
<script>
function manageControls() {
    const header       = document.getElementById("header");
    const networkSel   = document.getElementById("network_selector");
    const methodSel    = document.getElementById("method_selector");
    const button       = document.getElementById("show_controls");
    if (networkSel.hidden) {
        header.innerHTML = "zkFold Smart Wallet";
        networkSel.hidden = false;
        methodSel.hidden = false;
        button.innerHTML = "Hide advanced controls";
    } else {
        header.innerHTML = "zkFold Smart Wallet (Preprod)";
        networkSel.hidden = true;
        methodSel.hidden = true;
        button.innerHTML = "Show advanced controls";
        const methodOpts   = document.getElementById("method_options");
        methodOpts.value = "Google Oauth";
        manageMethod();
    }
}
function manageMethod() {
    const methodOpts   = document.getElementById("method_options");
    const addressInput = document.getElementById("address_input");
    const submit       = document.getElementById("submit");
    if (methodOpts.value == "Google Oauth") {
        addressInput.hidden = true;
        submit.value = "Initialise wallet with Gmail";
    } else {
        addressInput.hidden = false;
        submit.value = "Initialise wallet with seedphrase";
    }
}
</script>
</html>
