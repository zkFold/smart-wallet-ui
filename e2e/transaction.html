<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <link rel = "stylesheet" type="text/css" href="css/pico.min.css">
    <title>Smart Wallet Demo</title>
  </head>
  <body>
    <main class="container">
      <a href="https://zkfold.io"><img src="logo-200x73.png" style="width:250px;height:100px;"></a>
      <br>
      <br>
      <h1>Perform a transaction</h1>
      <label name="balance_label">
          Wallet balance: { balance } Ada
      </label>
      <form action="/send" method="POST">
        <fieldset>
          <label id="address_type" hidden>
            Type of address 
            <select name="recipient" aria-label="Select the type of address you want to send ADA to" required id="type_selector" onChange="manageType()">
              <option>Bech32</option>
              <option selected="selected">Gmail</option>
            </select>
          </label>
          <label>
            Recipient's address
            <input
              name="address" id="address_input" placeholder="example@gmail.com"
            />
          </label>
          <label>
            Amount 
            <input
              name="amount"
            />
          </label>
        </fieldset>
        <input
          type="submit"
          value="Send"
        />
      </form>
      <label id="faucet_label" hidden>
        Use this address to receive funds from the <a href='https://docs.cardano.org/cardano-testnets/tools/faucet'>Faucet</a>: {{ address }} 
      </label>
      <button class="outline secondary" id="show_address" onclick="manageAddress()">Show address</button>
      <button class="outline secondary" id="show_selector" onclick="manageSelector()">Show all controls</button>
    </main>
  </body>
<script>
function manageType() {
    const addressInput = document.getElementById("address_input");
    const selector     = document.getElementById("type_selector");
    if (selector.value == "Gmail") {
        addressInput.placeholder = "example@gmail.com";
    } else {
        addressInput.placeholder = "addr_test1xyz...(Bech32)";
    }
}
function manageAddress() {
    const label = document.getElementById("faucet_label");
    const button = document.getElementById("show_address");
    if (label.hidden) {
        label.hidden = false;
        button.innerHTML = "Hide address";
    } else {
        label.hidden = true;
        button.innerHTML = "Show address";
    }
}
function manageSelector() {
    const label    = document.getElementById("address_type");
    const button   = document.getElementById("show_selector");
    const selector = document.getElementById("type_selector");
    if (label.hidden) {
        label.hidden = false;
        button.innerHTML = "Hide address selector";
    } else {
        label.hidden = true;
        button.innerHTML = "Show all controls";
        selector.value = "Gmail";
        manageType();
    }
}
</script>
</html>
